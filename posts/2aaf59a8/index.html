<!-- build time:Fri Mar 29 2024 20:39:28 GMT+0800 (China Standard Time) --><!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#FFF"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="alternate" type="application/rss+xml" title="UniStart's Blog" href="https://unistart2.github.io/rss.xml"><link rel="alternate" type="application/atom+xml" title="UniStart's Blog" href="https://unistart2.github.io/atom.xml"><link rel="alternate" type="application/json" title="UniStart's Blog" href="https://unistart2.github.io/feed.json"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/css/app.css?v=0.2.5"><meta name="keywords" content="WebGL"><link rel="canonical" href="https://unistart2.github.io/posts/2aaf59a8/"><title>WebGL 学习（一） - WebGL | UniStart = UniStart's Blog = 心在哪里，家在哪里</title><meta name="generator" content="Hexo 6.2.0"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">WebGL 学习（一）</h1><div class="meta"><span class="item" title="创建时间：2023-03-15 09:47:20"><span class="icon"><i class="ic i-calendar"></i> </span><span class="text">发表于</span> <time itemprop="dateCreated datePublished" datetime="2023-03-15T09:47:20+08:00">2023-03-15</time> </span><span class="item" title="本文字数"><span class="icon"><i class="ic i-pen"></i> </span><span class="text">本文字数</span> <span>9.4k</span> <span class="text">字</span> </span><span class="item" title="阅读时长"><span class="icon"><i class="ic i-clock"></i> </span><span class="text">阅读时长</span> <span>9 分钟</span></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="切换导航栏"><span class="line"></span> <span class="line"></span> <span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">UniStart</a></li></ul><ul class="right"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div id="imgs" class="pjax"><ul><li class="item" data-background-image="https://api.hanximeng.com/ranimg/api.php?312709"></li><li class="item" data-background-image="https://api.hanximeng.com/ranimg/api.php?442801"></li><li class="item" data-background-image="https://api.hanximeng.com/ranimg/api.php?497211"></li><li class="item" data-background-image="https://api.hanximeng.com/ranimg/api.php?379231"></li><li class="item" data-background-image="https://api.hanximeng.com/ranimg/api.php?553392"></li><li class="item" data-background-image="https://api.hanximeng.com/ranimg/api.php?358895"></li></ul></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"/></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"/><use xlink:href="#gentle-wave" x="48" y="3"/><use xlink:href="#gentle-wave" x="48" y="5"/><use xlink:href="#gentle-wave" x="48" y="7"/></g></svg></div><main><div class="inner"><div id="main" class="pjax"><div class="article wrap"><div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i> <span><a href="/">首页</a></span><i class="ic i-angle-right"></i> <span class="current" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/WebGL/" itemprop="item" rel="index" title="分类于 WebGL"><span itemprop="name">WebGL</span></a><meta itemprop="position" content="1"></span></div><article itemscope itemtype="http://schema.org/Article" class="post block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://unistart2.github.io/posts/2aaf59a8/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="unistart"><meta itemprop="description" content="心在哪里，家在哪里, 个人博客"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="UniStart's Blog"></span><div class="body md" itemprop="articleBody"><link rel="stylesheet" type="text&#x2F;css" href="https://cdn.jsdelivr.net/npm/hexo-tag-hint@0.3.1/dist/hexo-tag-hint.min.css"><div class="note info"><p>参考书籍：《WebGL 编程指南》</p></div><h2 id="canvas"><a class="anchor" href="#canvas">#</a> canvas</h2><blockquote><p><span class="red">canvas</span> 是<span class="red"> HTML5</span> 新增标签，用于定义网页上的绘图区域，可以通过<span class="red"> JavaScript</span> 代码在上面绘制图形</p></blockquote><p><span class="label primary">关于 Canvas 更多信息请参考 MDN 相关文档</span><br><span class="label primary">Canvas 简单使用示例</span></p><figure class="highlight html"><figcaption data-lang="HTML"><span>HelloCanvas.html</span></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>X-UA-Compatible<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>IE=edge<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=1.0<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Hello Canvas<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span> <span class="token special-attr"><span class="token attr-name">onload</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span></pre></td></tr><tr class="marked"><td data-num="10"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>canvas</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>webgl<span class="token punctuation">"</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>400<span class="token punctuation">"</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>400<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr class="marked"><td data-num="11"></td><td><pre>        Please use the browser supporting "canvas"</pre></td></tr><tr class="marked"><td data-num="12"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>canvas</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="13"></td><td><pre></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>../lib/webgl-utils.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>../lib/webgl-debug.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>../lib/cuon-utils.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>HelloCanvas.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">function</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token comment">// 获取 canvas 元素</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">var</span> canvas <span class="token operator">=</span> <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">getElementById</span><span class="token punctuation">(</span><span class="token string">'webgl'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token comment">// 获取 WebGL 绘图上下文（调用 cuon-util.js 中封装的方法）</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token keyword">var</span> gl <span class="token operator">=</span> <span class="token function">getWebGLContext</span><span class="token punctuation">(</span>canvas<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token keyword control-flow">if</span><span class="token punctuation">(</span><span class="token operator">!</span>gl<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">'Failed to get the rendering context for WebGL'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token keyword control-flow">return</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token comment">// 指定清空 canvas 的颜色</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    gl<span class="token punctuation">.</span><span class="token method function property-access">clearColor</span><span class="token punctuation">(</span><span class="token number">0.2</span><span class="token punctuation">,</span> <span class="token number">0.4</span><span class="token punctuation">,</span> <span class="token number">0.6</span><span class="token punctuation">,</span> <span class="token number">0.8</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token comment">// 清空 canvas</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    gl<span class="token punctuation">.</span><span class="token method function property-access">clear</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">COLOR_BUFFER_BIT</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><details class="info"><summary>效果</summary><div><p><img data-src="https://cdn.unistart.top/blog/webgl-study/cVnIs68.png" alt="HelloCanvas"></p></div></details><p>上述代码在 HTML 中定义了一个<span class="red"> 400x400 的 canvas</span>，并通过 js 代码获取到了<span class="red"> canvas 元素对象</span>以及其<span class="red"> WebGL 绘图上下文对象</span>，通过<span class="red"> WebGL 绘图上下文对象</span>以<span class="red"> RBGA</span> 的形式设置了<span class="red"> canvas</span> 的背景颜色，最后用之前设置的背景色清空<span class="red"> canvas</span> 绘图区域。</p><div class="note warning"><p>一旦通过 clearColor 方法指定背景色后，背景色就会驻存在 WebGL 系统中，在下一次重新调用 clearColor 方法设置背景色前不会改变。</p></div><details class="primary"><summary>clear方法说明</summary><div><p>clear 用于清空指定缓冲区数据，它接受一个枚举类型的参数 buffer，具体说明如下：</p><ol><li>gl.COLOR_BUFFER_BIT：指定颜色缓冲区</li><li>gl.DEPTH_BUFFER_BIT: 指定深度缓冲区</li><li>gl.STENCIL_BUFFER_BIT: 指定模板缓冲区<br>返回值：无<br>错误：INVALID_VALUE - 缓冲区不是以上三种类型</li></ol><hr><p>各缓冲区默认行为：<br>颜色缓冲区：相关函数 gl.clearColor (r, g, b, a)，默认值 (0.0, 0.0, 0.0, 0.0)<br>深度缓冲区：相关函数 gl.clearDepth (depth)，默认值 1.0<br>模板缓冲区：相关函数 gl.clearStencil (s)，默认值 0</p></div></details><h2 id="初识着色器程序"><a class="anchor" href="#初识着色器程序">#</a> 初识着色器程序</h2><blockquote><p><span class="red">WebGL</span> 依赖于<span class="red">着色器 (shader)</span> 机制进行绘图，在<span class="red"> WebGL</span> 中<span class="red">着色器程序</span>是<span class="red">以字符串的形式嵌入在 JavaScript 代码中</span>的</p></blockquote><figure class="highlight html"><figcaption data-lang="HTML"><span>HelloPoint1.html</span></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>X-UA-Compatible<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>IE=edge<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=1.0<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Draw a point (1)<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span> <span class="token special-attr"><span class="token attr-name">onload</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>canvas</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>webgl<span class="token punctuation">"</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>400<span class="token punctuation">"</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>400<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="11"></td><td><pre>        Please use the browser supporting "canvas"</pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>canvas</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="13"></td><td><pre></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>../lib/webgl-utils.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>../lib/webgl-debug.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>../lib/cuon-utils.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>HelloPoint1.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><figure class="highlight js"><figcaption data-lang="JavaScript"><span>HelloPoint1.js 28</span></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 顶点着色器程序 (vertex shader program)</span></pre></td></tr><tr class="marked"><td data-num="2"></td><td><pre><span class="token keyword">var</span> <span class="token constant">VSHADER_SOURCE</span> <span class="token operator">=</span> </pre></td></tr><tr class="marked"><td data-num="3"></td><td><pre>    <span class="token string">'void main() &#123;\n'</span> <span class="token operator">+</span> </pre></td></tr><tr class="marked"><td data-num="4"></td><td><pre>    <span class="token string">' gl_Position = vec4(0.0, 0.0, 0.0, 1.0);\n'</span> <span class="token operator">+</span> <span class="token comment">// 设置坐标</span></pre></td></tr><tr class="marked"><td data-num="5"></td><td><pre>    <span class="token string">' gl_PointSize = 10.0;\n'</span> <span class="token operator">+</span> <span class="token comment">// 设置尺寸</span></pre></td></tr><tr class="marked"><td data-num="6"></td><td><pre>    <span class="token string">'&#125;\n'</span><span class="token punctuation">;</span></pre></td></tr><tr class="marked"><td data-num="7"></td><td><pre></pre></td></tr><tr class="marked"><td data-num="8"></td><td><pre></pre></td></tr><tr class="marked"><td data-num="9"></td><td><pre><span class="token comment">// 片元着色器程序 (Fragment shader program)</span></pre></td></tr><tr class="marked"><td data-num="10"></td><td><pre><span class="token keyword">var</span> <span class="token constant">FSHADER_SOURCE</span> <span class="token operator">=</span> </pre></td></tr><tr class="marked"><td data-num="11"></td><td><pre>    <span class="token string">'void main() &#123;\n'</span> <span class="token operator">+</span></pre></td></tr><tr class="marked"><td data-num="12"></td><td><pre>    <span class="token string">' gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);\n'</span> <span class="token operator">+</span> <span class="token comment">// 设置颜色</span></pre></td></tr><tr class="marked"><td data-num="13"></td><td><pre>    <span class="token string">'&#125;\n'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre></pre></td></tr><tr><td data-num="15"></td><td><pre></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token keyword">function</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token comment">// 获取 canvans 元素</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token keyword">var</span> canvans <span class="token operator">=</span> <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">getElementById</span><span class="token punctuation">(</span><span class="token string">'webgl'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token comment">// 获取 WebGL 上下文</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    <span class="token keyword">var</span> gl <span class="token operator">=</span> <span class="token function">getWebGLContext</span><span class="token punctuation">(</span>canvans<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>    <span class="token keyword control-flow">if</span><span class="token punctuation">(</span><span class="token operator">!</span>gl<span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>        <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">'Failed to get the rendering context for WebGL'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>        <span class="token keyword control-flow">return</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="26"></td><td><pre></pre></td></tr><tr><td data-num="27"></td><td><pre>    <span class="token comment">// 初始化着色器</span></pre></td></tr><tr><td data-num="28"></td><td><pre>    <span class="token keyword control-flow">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">initShaders</span><span class="token punctuation">(</span>gl<span class="token punctuation">,</span> <span class="token constant">VSHADER_SOURCE</span><span class="token punctuation">,</span> <span class="token constant">FSHADER_SOURCE</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>        <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">'Failed to initialize shaders.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>        <span class="token keyword control-flow">return</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="32"></td><td><pre></pre></td></tr><tr><td data-num="33"></td><td><pre>    <span class="token comment">// 设置 canvas 颜色</span></pre></td></tr><tr><td data-num="34"></td><td><pre>    gl<span class="token punctuation">.</span><span class="token method function property-access">clearColor</span><span class="token punctuation">(</span><span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="35"></td><td><pre></pre></td></tr><tr><td data-num="36"></td><td><pre>    <span class="token comment">// 清空 canvas</span></pre></td></tr><tr><td data-num="37"></td><td><pre>    gl<span class="token punctuation">.</span><span class="token method function property-access">clear</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">COLOR_BUFFER_BIT</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="38"></td><td><pre></pre></td></tr><tr><td data-num="39"></td><td><pre>    <span class="token comment">// 绘制一个点</span></pre></td></tr><tr><td data-num="40"></td><td><pre>    gl<span class="token punctuation">.</span><span class="token method function property-access">drawArrays</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">POINTS</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="41"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><details class="info"><summary>效果</summary><div><p><img data-src="https://cdn.unistart.top/blog/webgl-study/s7spqnB.png" alt="HelloPoint1"></p></div></details><blockquote><p><span class="red">顶点着色器 (Vertex shader):</span> 用来描述顶点特性（如位置，颜色等）的程序。顶点是值二维或三维空间中的一个点，比如二维或三维图像的端点或交点。<br><span class="red">片元着色器 (Fragment shader):</span> 进行逐片元处理过程如光照的程序。片元是 WebGL 术语，可以将其理解为像素（图像的单元）。</p></blockquote><details class="primary"><summary>WebGL渲染过程</summary><div><p><img data-src="https://cdn.unistart.top/blog/webgl-study/webgl-render-process.png" alt="WebGL渲染过程"></p></div></details><div class="note primary"><p>1.WebGL 程序包括两部分：运行在浏览器中的 JavaScript 和运行在 WebGL 系统的着色器程序<br>2.WebGL 一般用于绘制三维图形，使用三维坐标。通常情况下 WebGL 中的坐标系是<span class="red">右手坐标系</span>，<ins class="dot">坐标原点是 canvas 绘图区域的正中心，x 轴正方向为向右，y 轴正方向为向上，z 轴正方向为垂直于屏幕向外</ins><br>3.canvas 绘图区域的坐标原点在绘图区域的左上角，x 轴正方向为向右，y 轴正方向为向下</p></div><h2 id="动态向着色器传输数据"><a class="anchor" href="#动态向着色器传输数据">#</a> 动态向着色器传输数据</h2><blockquote><p>之前的着色器程序中，点的位置、大小、颜色等信息都是硬编码的，缺乏可扩展性。我们需要动态从 JavaScript 程序中传递数据给着色器程序。<br>有两种方式可以做到这一点：<span class="red">attribute 变量</span>和<span class="red"> uniform 变量</span></p></blockquote><div class="note primary"><ol><li><span class="blue">attribute 变量</span>：传输和顶点相关的数据</li><li><span class="blue">uniform 变量</span>：传输对于所有顶点都相同的数据或者和顶点无关的数据</li></ol></div><figure class="highlight html"><figcaption data-lang="HTML"><span>HelloPoint2.html</span></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>X-UA-Compatible<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>IE=edge<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=1.0<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Draw a point (2)<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span> <span class="token special-attr"><span class="token attr-name">onload</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>canvas</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>webgl<span class="token punctuation">"</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>400<span class="token punctuation">"</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>400<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="11"></td><td><pre>        Please use the browser supporting "canvas"</pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>canvas</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="13"></td><td><pre></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>../lib/webgl-utils.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>../lib/webgl-debug.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>../lib/cuon-utils.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>HelloPoint2.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><figure class="highlight js"><figcaption data-lang="JavaScript"><span>HelloPoint2.js</span></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 顶点着色器程序 (vertex shader program)</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">var</span> <span class="token constant">VSHADER_SOURCE</span> <span class="token operator">=</span> </pre></td></tr><tr class="marked"><td data-num="3"></td><td><pre>    <span class="token string">'attribute vec4 a_Position;\n'</span> <span class="token operator">+</span></pre></td></tr><tr class="marked"><td data-num="4"></td><td><pre>    <span class="token string">'attribute float a_PointSize;\n'</span> <span class="token operator">+</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token string">'void main() &#123;\n'</span> <span class="token operator">+</span> </pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token string">' gl_Position = a_Position;\n'</span> <span class="token operator">+</span> <span class="token comment">// 设置坐标</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token string">' gl_PointSize = a_PointSize;\n'</span> <span class="token operator">+</span> <span class="token comment">// 设置尺寸</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token string">'&#125;\n'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token comment">// 片元着色器程序 (Fragment shader program)</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token keyword">var</span> <span class="token constant">FSHADER_SOURCE</span> <span class="token operator">=</span> </pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token string">'void main() &#123;\n'</span> <span class="token operator">+</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token string">' gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);\n'</span> <span class="token operator">+</span> <span class="token comment">// 设置颜色</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token string">'&#125;\n'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre></pre></td></tr><tr><td data-num="17"></td><td><pre></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token keyword">function</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token comment">// 获取 & lt;canvans > 元素</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token keyword">var</span> canvans <span class="token operator">=</span> <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">getElementById</span><span class="token punctuation">(</span><span class="token string">'webgl'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre></pre></td></tr><tr><td data-num="22"></td><td><pre>    <span class="token comment">// 获取 WebGL 上下文</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    <span class="token keyword">var</span> gl <span class="token operator">=</span> <span class="token function">getWebGLContext</span><span class="token punctuation">(</span>canvans<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>    <span class="token keyword control-flow">if</span><span class="token punctuation">(</span><span class="token operator">!</span>gl<span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>        <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">'Failed to get the rendering context for WebGL'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>        <span class="token keyword control-flow">return</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="28"></td><td><pre></pre></td></tr><tr><td data-num="29"></td><td><pre>    <span class="token comment">// 初始化着色器</span></pre></td></tr><tr><td data-num="30"></td><td><pre>    <span class="token keyword control-flow">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">initShaders</span><span class="token punctuation">(</span>gl<span class="token punctuation">,</span> <span class="token constant">VSHADER_SOURCE</span><span class="token punctuation">,</span> <span class="token constant">FSHADER_SOURCE</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>        <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">'Failed to initialize shaders.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>        <span class="token keyword control-flow">return</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="34"></td><td><pre></pre></td></tr><tr><td data-num="35"></td><td><pre>    <span class="token comment">// 获取 attribute 变量 a_Position 的存储地址</span></pre></td></tr><tr class="marked"><td data-num="36"></td><td><pre>    <span class="token keyword">var</span> a_Position <span class="token operator">=</span> gl<span class="token punctuation">.</span><span class="token method function property-access">getAttribLocation</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token property-access">program</span><span class="token punctuation">,</span> <span class="token string">'a_Position'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr class="marked"><td data-num="37"></td><td><pre>    <span class="token keyword control-flow">if</span><span class="token punctuation">(</span>a_Position <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr class="marked"><td data-num="38"></td><td><pre>        <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">'Failed to get the storage location of a_Position'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr class="marked"><td data-num="39"></td><td><pre>        <span class="token keyword control-flow">return</span><span class="token punctuation">;</span></pre></td></tr><tr class="marked"><td data-num="40"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="41"></td><td><pre></pre></td></tr><tr><td data-num="42"></td><td><pre>    <span class="token comment">// 传输顶点大小（方式一）</span></pre></td></tr><tr class="marked"><td data-num="43"></td><td><pre>    gl<span class="token punctuation">.</span><span class="token method function property-access">vertexAttrib3f</span><span class="token punctuation">(</span>a_Position<span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="44"></td><td><pre>    <span class="token comment">// 传输顶点大小（方式二）</span></pre></td></tr><tr><td data-num="45"></td><td><pre>    <span class="token comment">// var positions = new Float32Array([0.5, 0.5, 0.0, 1.0])</span></pre></td></tr><tr><td data-num="46"></td><td><pre>    <span class="token comment">// gl.vertexAttrib4fv(a_Position, positions);</span></pre></td></tr><tr><td data-num="47"></td><td><pre></pre></td></tr><tr><td data-num="48"></td><td><pre></pre></td></tr><tr><td data-num="49"></td><td><pre>    <span class="token comment">// 获取 attribute 变量 a_PointSize 的存储地址</span></pre></td></tr><tr class="marked"><td data-num="50"></td><td><pre>    <span class="token keyword">var</span> a_PointSize <span class="token operator">=</span> gl<span class="token punctuation">.</span><span class="token method function property-access">getAttribLocation</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token property-access">program</span><span class="token punctuation">,</span> <span class="token string">'a_PointSize'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr class="marked"><td data-num="51"></td><td><pre>    <span class="token keyword control-flow">if</span><span class="token punctuation">(</span>a_PointSize <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr class="marked"><td data-num="52"></td><td><pre>        <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">'Failed to get the storage location of a_PointSize'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr class="marked"><td data-num="53"></td><td><pre>        <span class="token keyword control-flow">return</span><span class="token punctuation">;</span></pre></td></tr><tr class="marked"><td data-num="54"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="55"></td><td><pre>    </pre></td></tr><tr><td data-num="56"></td><td><pre>    <span class="token comment">// 传输顶点大小</span></pre></td></tr><tr class="marked"><td data-num="57"></td><td><pre>    gl<span class="token punctuation">.</span><span class="token method function property-access">vertexAttrib1f</span><span class="token punctuation">(</span>a_PointSize<span class="token punctuation">,</span> <span class="token number">200.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="58"></td><td><pre></pre></td></tr><tr><td data-num="59"></td><td><pre></pre></td></tr><tr><td data-num="60"></td><td><pre>    <span class="token comment">// 设置 canvas 颜色</span></pre></td></tr><tr><td data-num="61"></td><td><pre>    gl<span class="token punctuation">.</span><span class="token method function property-access">clearColor</span><span class="token punctuation">(</span><span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="62"></td><td><pre></pre></td></tr><tr><td data-num="63"></td><td><pre>    <span class="token comment">// 清空 canvas</span></pre></td></tr><tr><td data-num="64"></td><td><pre>    gl<span class="token punctuation">.</span><span class="token method function property-access">clear</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">COLOR_BUFFER_BIT</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="65"></td><td><pre></pre></td></tr><tr><td data-num="66"></td><td><pre>    <span class="token comment">// 绘制一个点</span></pre></td></tr><tr><td data-num="67"></td><td><pre>    gl<span class="token punctuation">.</span><span class="token method function property-access">drawArrays</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">POINTS</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="68"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><details class="info"><summary>效果</summary><div><p><img data-src="https://cdn.unistart.top/blog/webgl-study/msedge_qugtfgX54h.png" alt="HelloPoint2"></p></div></details><details class="primary"><summary>相关函数说明</summary><div><ul><li><span class="red">getAttribLocation(program, name)</span>：获取 name 参数指定的 attribute 变量的存储地址。program 参数指定包含顶点着色器和片元着色器的着色器程序对象。name 参数指定要获取的 attribute 变量的名称。成功返回变量地址，失败返回 - 1。</li><li><span class="red">vertexAttrib3f(location, v0, v1, v2)</span>：将 (v0, v1, v2) 传递给 location 参数指定的 attribute 变量。location 参数指定要修改的 attribute 变量的地址，v0 指定填充 attribute 变量第一个分量的值，v1、v2 依次类推。它是一系列同族方法中的一个，类型的有 vertexAttrib1f、vertexAttrib2f、vertexAttrib4f。</li><li><span class="red">vertexAttrib4fv(location, position)</span>：vertexAttrib4f 方法的矢量版本（名称以 v 结尾），它接受类型化数组为参数。location 指定要修改的 attribute 变量的地址，position 是代表矢量的类型化数组</li></ul></div></details><div class="note warning"><p><ins class="dot">attribute 变量只能在顶点着色器中使用，uniform 变量在顶点着色器和片元着色器中均可使用</ins>。</p></div><blockquote><p>还可以通过 js 事件来动态传输数据到着色器中</p></blockquote><figure class="highlight html"><figcaption data-lang="HTML"><span>ColoredPoint.html</span></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>X-UA-Compatible<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>IE=edge<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=1.0<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Colored Points<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span> <span class="token special-attr"><span class="token attr-name">onload</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>canvas</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>webgl<span class="token punctuation">"</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>400<span class="token punctuation">"</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>400<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="11"></td><td><pre>        Please use the browser supporting "canvas"</pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>canvas</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="13"></td><td><pre></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>../lib/webgl-utils.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>../lib/webgl-debug.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>../lib/cuon-utils.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ColoredPoints.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><figure class="highlight js"><figcaption data-lang="JavaScript"><span>ColoredPoint.html</span></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 顶点着色器程序 (vertex shader program)</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">var</span> <span class="token constant">VSHADER_SOURCE</span> <span class="token operator">=</span> </pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token string">'attribute vec4 a_Position;\n'</span> <span class="token operator">+</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token string">'attribute float a_PointSize;\n'</span> <span class="token operator">+</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token string">'void main() &#123;\n'</span> <span class="token operator">+</span> </pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token string">' gl_Position = a_Position;\n'</span> <span class="token operator">+</span> <span class="token comment">// 设置坐标</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token string">' gl_PointSize = a_PointSize;\n'</span> <span class="token operator">+</span> <span class="token comment">// 设置尺寸</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token string">'&#125;\n'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token comment">// 片元着色器程序 (Fragment shader program)</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token keyword">var</span> <span class="token constant">FSHADER_SOURCE</span> <span class="token operator">=</span> </pre></td></tr><tr class="marked"><td data-num="13"></td><td><pre>    <span class="token string">'precision mediump float;\n'</span> <span class="token operator">+</span></pre></td></tr><tr class="marked"><td data-num="14"></td><td><pre>    <span class="token string">'uniform vec4 u_FragColor;\n'</span> <span class="token operator">+</span> <span class="token comment">//uniform 变量</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token string">'void main() &#123;\n'</span> <span class="token operator">+</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token string">' gl_FragColor = u_FragColor;\n'</span> <span class="token operator">+</span> <span class="token comment">// 设置颜色</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token string">'&#125;\n'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre></pre></td></tr><tr><td data-num="19"></td><td><pre></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token keyword">function</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    <span class="token comment">// 获取 & lt;canvans > 元素</span></pre></td></tr><tr><td data-num="22"></td><td><pre>    <span class="token keyword">var</span> canvans <span class="token operator">=</span> <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">getElementById</span><span class="token punctuation">(</span><span class="token string">'webgl'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre></pre></td></tr><tr><td data-num="24"></td><td><pre>    <span class="token comment">// 获取 WebGL 上下文</span></pre></td></tr><tr><td data-num="25"></td><td><pre>    <span class="token keyword">var</span> gl <span class="token operator">=</span> <span class="token function">getWebGLContext</span><span class="token punctuation">(</span>canvans<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>    <span class="token keyword control-flow">if</span><span class="token punctuation">(</span><span class="token operator">!</span>gl<span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>        <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">'Failed to get the rendering context for WebGL'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>        <span class="token keyword control-flow">return</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="30"></td><td><pre></pre></td></tr><tr><td data-num="31"></td><td><pre>    <span class="token comment">// 初始化着色器</span></pre></td></tr><tr><td data-num="32"></td><td><pre>    <span class="token keyword control-flow">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">initShaders</span><span class="token punctuation">(</span>gl<span class="token punctuation">,</span> <span class="token constant">VSHADER_SOURCE</span><span class="token punctuation">,</span> <span class="token constant">FSHADER_SOURCE</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>        <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">'Failed to initialize shaders.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>        <span class="token keyword control-flow">return</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="36"></td><td><pre></pre></td></tr><tr><td data-num="37"></td><td><pre>    <span class="token comment">// 获取 a_Position 变量的存储位置</span></pre></td></tr><tr><td data-num="38"></td><td><pre>    <span class="token keyword">var</span> a_Position <span class="token operator">=</span> gl<span class="token punctuation">.</span><span class="token method function property-access">getAttribLocation</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token property-access">program</span><span class="token punctuation">,</span> <span class="token string">'a_Position'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="39"></td><td><pre>    <span class="token keyword control-flow">if</span><span class="token punctuation">(</span>a_Position <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="40"></td><td><pre>        <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">'Failed to get storage location of a_Position'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="41"></td><td><pre>        <span class="token keyword control-flow">return</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="42"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="43"></td><td><pre>    <span class="token comment">// 获取 a_PointSize 变量的存储位置</span></pre></td></tr><tr><td data-num="44"></td><td><pre>    <span class="token keyword">var</span> a_PointSize <span class="token operator">=</span> gl<span class="token punctuation">.</span><span class="token method function property-access">getAttribLocation</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token property-access">program</span><span class="token punctuation">,</span> <span class="token string">'a_PointSize'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="45"></td><td><pre>    <span class="token keyword control-flow">if</span><span class="token punctuation">(</span>a_PointSize <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="46"></td><td><pre>        <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">'Failed to get storage location of a_PointSize'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="47"></td><td><pre>        <span class="token keyword control-flow">return</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="48"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="49"></td><td><pre></pre></td></tr><tr><td data-num="50"></td><td><pre>    <span class="token comment">// 获取 u_FragColor 变量的存储位置</span></pre></td></tr><tr class="marked"><td data-num="51"></td><td><pre>    <span class="token keyword">var</span> u_FragColor <span class="token operator">=</span> gl<span class="token punctuation">.</span><span class="token method function property-access">getUniformLocation</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token property-access">program</span><span class="token punctuation">,</span> <span class="token string">'u_FragColor'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr class="marked"><td data-num="52"></td><td><pre>    <span class="token keyword control-flow">if</span><span class="token punctuation">(</span><span class="token operator">!</span>u_FragColor<span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr class="marked"><td data-num="53"></td><td><pre>        <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">'Failed to get storage location of u_FragColor'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr class="marked"><td data-num="54"></td><td><pre>        <span class="token keyword control-flow">return</span><span class="token punctuation">;</span></pre></td></tr><tr class="marked"><td data-num="55"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="56"></td><td><pre></pre></td></tr><tr><td data-num="57"></td><td><pre>    <span class="token comment">// 传入 a_PointSize</span></pre></td></tr><tr><td data-num="58"></td><td><pre>    gl<span class="token punctuation">.</span><span class="token method function property-access">vertexAttrib1f</span><span class="token punctuation">(</span>a_PointSize<span class="token punctuation">,</span> <span class="token number">10.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="59"></td><td><pre></pre></td></tr><tr><td data-num="60"></td><td><pre>    <span class="token comment">// 设置 canvas 颜色</span></pre></td></tr><tr><td data-num="61"></td><td><pre>    gl<span class="token punctuation">.</span><span class="token method function property-access">clearColor</span><span class="token punctuation">(</span><span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="62"></td><td><pre></pre></td></tr><tr><td data-num="63"></td><td><pre>    <span class="token comment">// 清空 canvas</span></pre></td></tr><tr><td data-num="64"></td><td><pre>    gl<span class="token punctuation">.</span><span class="token method function property-access">clear</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">COLOR_BUFFER_BIT</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="65"></td><td><pre></pre></td></tr><tr><td data-num="66"></td><td><pre>    <span class="token comment">// 绘制一个点</span></pre></td></tr><tr><td data-num="67"></td><td><pre>    gl<span class="token punctuation">.</span><span class="token method function property-access">drawArrays</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">POINTS</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="68"></td><td><pre></pre></td></tr><tr><td data-num="69"></td><td><pre>    <span class="token comment">// 注册鼠标点击事件响应函数</span></pre></td></tr><tr class="marked"><td data-num="70"></td><td><pre>    canvans<span class="token punctuation">.</span><span class="token method-variable function-variable method function property-access">onmousedown</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">ev</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr class="marked"><td data-num="71"></td><td><pre>        <span class="token function">click</span><span class="token punctuation">(</span>ev<span class="token punctuation">,</span> gl<span class="token punctuation">,</span> canvans<span class="token punctuation">,</span> a_Position<span class="token punctuation">,</span> u_FragColor<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr class="marked"><td data-num="72"></td><td><pre></pre></td></tr><tr class="marked"><td data-num="73"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="74"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="75"></td><td><pre></pre></td></tr><tr><td data-num="76"></td><td><pre><span class="token keyword">var</span> g_points <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 鼠标点击位置数组</span></pre></td></tr><tr><td data-num="77"></td><td><pre><span class="token keyword">var</span> g_colors <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 存储颜色的数组</span></pre></td></tr><tr><td data-num="78"></td><td><pre><span class="token doc-comment comment">/**</span></pre></td></tr><tr><td data-num="79"></td><td><pre> * 点击事件响应函数</pre></td></tr><tr><td data-num="80"></td><td><pre> * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">&#123;</span><span class="token operator">*</span><span class="token punctuation">&#125;</span></span> <span class="token parameter">ev</span> </pre></td></tr><tr><td data-num="81"></td><td><pre> * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">&#123;</span><span class="token operator">*</span><span class="token punctuation">&#125;</span></span> <span class="token parameter">gl</span> </pre></td></tr><tr><td data-num="82"></td><td><pre> * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">&#123;</span><span class="token operator">*</span><span class="token punctuation">&#125;</span></span> <span class="token parameter">canvans</span> </pre></td></tr><tr><td data-num="83"></td><td><pre> * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">&#123;</span><span class="token operator">*</span><span class="token punctuation">&#125;</span></span> <span class="token parameter">a_Position</span> </pre></td></tr><tr><td data-num="84"></td><td><pre> * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">&#123;</span><span class="token operator">*</span><span class="token punctuation">&#125;</span></span> <span class="token parameter">u_FragColor</span></pre></td></tr><tr><td data-num="85"></td><td><pre> */</pre></td></tr><tr><td data-num="86"></td><td><pre><span class="token keyword">function</span> <span class="token function">click</span><span class="token punctuation">(</span><span class="token parameter">ev<span class="token punctuation">,</span> gl<span class="token punctuation">,</span> canvas<span class="token punctuation">,</span> a_Position<span class="token punctuation">,</span> u_FragColor</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="87"></td><td><pre>    <span class="token keyword">var</span> x <span class="token operator">=</span> ev<span class="token punctuation">.</span><span class="token property-access">clientX</span><span class="token punctuation">;</span> <span class="token comment">// 鼠标点击处 x 坐标</span></pre></td></tr><tr><td data-num="88"></td><td><pre>    <span class="token keyword">var</span> y <span class="token operator">=</span> ev<span class="token punctuation">.</span><span class="token property-access">clientY</span><span class="token punctuation">;</span> <span class="token comment">// 鼠标点击处 y 坐标</span></pre></td></tr><tr><td data-num="89"></td><td><pre>    <span class="token keyword">var</span> rect <span class="token operator">=</span> ev<span class="token punctuation">.</span><span class="token property-access">target</span><span class="token punctuation">.</span><span class="token method function property-access">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="90"></td><td><pre></pre></td></tr><tr><td data-num="91"></td><td><pre>    x <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>x <span class="token operator">-</span> rect<span class="token punctuation">.</span><span class="token property-access">left</span><span class="token punctuation">)</span> <span class="token operator">-</span> canvas<span class="token punctuation">.</span><span class="token property-access">width</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token punctuation">(</span>canvas<span class="token punctuation">.</span><span class="token property-access">width</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="92"></td><td><pre>    y <span class="token operator">=</span> <span class="token punctuation">(</span>canvas<span class="token punctuation">.</span><span class="token property-access">height</span><span class="token operator">/</span><span class="token number">2</span> <span class="token operator">-</span> <span class="token punctuation">(</span>y <span class="token operator">-</span> rect<span class="token punctuation">.</span><span class="token property-access">top</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token punctuation">(</span>canvas<span class="token punctuation">.</span><span class="token property-access">height</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="93"></td><td><pre>    <span class="token comment">// 将坐标存储到 g_points 数组中</span></pre></td></tr><tr><td data-num="94"></td><td><pre>    g_points<span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span><span class="token punctuation">[</span>x<span class="token punctuation">,</span> y<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="95"></td><td><pre></pre></td></tr><tr><td data-num="96"></td><td><pre>    <span class="token comment">// 将点的颜色存储到 g_colors 数组中</span></pre></td></tr><tr><td data-num="97"></td><td><pre>    <span class="token keyword control-flow">if</span><span class="token punctuation">(</span>x <span class="token operator">>=</span> <span class="token number">0.0</span> <span class="token operator">&amp;&amp;</span> y <span class="token operator">>=</span> <span class="token number">0.0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">// 第一象限</span></pre></td></tr><tr><td data-num="98"></td><td><pre>        g_colors<span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// 红色</span></pre></td></tr><tr><td data-num="99"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token keyword control-flow">else</span> <span class="token keyword control-flow">if</span><span class="token punctuation">(</span>x <span class="token operator">&lt;</span> <span class="token number">0.0</span> <span class="token operator">&amp;&amp;</span> y <span class="token operator">&lt;</span> <span class="token number">0.0</span> <span class="token punctuation">)</span><span class="token punctuation">&#123;</span> <span class="token comment">// 第三象限</span></pre></td></tr><tr><td data-num="100"></td><td><pre>        g_colors<span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// 绿色</span></pre></td></tr><tr><td data-num="101"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token keyword control-flow">else</span> <span class="token punctuation">&#123;</span> <span class="token comment">// 其他象限</span></pre></td></tr><tr><td data-num="102"></td><td><pre>        g_colors<span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 白色</span></pre></td></tr><tr><td data-num="103"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="104"></td><td><pre></pre></td></tr><tr><td data-num="105"></td><td><pre>    <span class="token comment">// 清除 canvas</span></pre></td></tr><tr><td data-num="106"></td><td><pre>    gl<span class="token punctuation">.</span><span class="token method function property-access">clear</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">COLOR_BUFFER_BIT</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="107"></td><td><pre></pre></td></tr><tr><td data-num="108"></td><td><pre>    <span class="token keyword">var</span> len <span class="token operator">=</span> g_points<span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="109"></td><td><pre>    <span class="token keyword control-flow">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="110"></td><td><pre>        <span class="token keyword">var</span> xy <span class="token operator">=</span> g_points<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="111"></td><td><pre>        <span class="token keyword">var</span> rgba <span class="token operator">=</span> g_colors<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="112"></td><td><pre></pre></td></tr><tr><td data-num="113"></td><td><pre>        <span class="token comment">// 将点的位置传递到变量 a_Position 中</span></pre></td></tr><tr><td data-num="114"></td><td><pre>        gl<span class="token punctuation">.</span><span class="token method function property-access">vertexAttrib3f</span><span class="token punctuation">(</span>a_Position<span class="token punctuation">,</span> xy<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> xy<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="115"></td><td><pre>        <span class="token comment">// 将点的颜色传递到变量 u_FragColor 中</span></pre></td></tr><tr><td data-num="116"></td><td><pre>        gl<span class="token punctuation">.</span><span class="token method function property-access">uniform4f</span><span class="token punctuation">(</span>u_FragColor<span class="token punctuation">,</span> rgba<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> rgba<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>rgba<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> rgba<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="117"></td><td><pre></pre></td></tr><tr><td data-num="118"></td><td><pre>        <span class="token comment">// 绘制点</span></pre></td></tr><tr><td data-num="119"></td><td><pre>        gl<span class="token punctuation">.</span><span class="token method function property-access">drawArrays</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">POINTS</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="120"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="121"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><details class="info"><summary>效果</summary><div><p><img data-src="https://cdn.unistart.top/blog/webgl-study/msedge_t5BmKl5bhp.png" alt="ColoredPoint"></p></div></details><details class="primary"><summary>相关函数说明</summary><div><ul><li><span class="blue">getUniformLocation(program, name)</span>: 获取 name 指定的 uniform 变量的地址。program 参数指定着色器程序对象，name 参数指定要获取的 uniform 变量名称。成功返回 uniform 变量地址，失败返回 null。</li><li><span class="blue">uniform4f(location, v0, v1, v2, v3)</span>：将数据 (v0, v1, v2, v3) 传递给 location 参数指定的 uniform 变量。它也是一系列同组方法中的一个，类似的有 uniform1f、uniform2f、uniform3f。</li></ul></div></details><div class="tags"><a href="/tags/WebGL/" rel="tag"><i class="ic i-tag"></i> WebGL</a></div></div><footer><div class="meta"><span class="item"><span class="icon"><i class="ic i-calendar-check"></i> </span><span class="text">更新于</span> <time title="修改时间：2023-05-31 18:08:43" itemprop="dateModified" datetime="2023-05-31T18:08:43+08:00">2023-05-31</time> </span><span id="posts/2aaf59a8/" class="item leancloud_visitors" data-flag-title="WebGL 学习（一）" title="阅读次数"><span class="icon"><i class="ic i-eye"></i> </span><span class="text">阅读次数</span> <span class="leancloud-visitors-count"></span> <span class="text">次</span></span></div><div id="copyright"><ul><li class="author"><strong>本文作者： </strong>unistart <i class="ic i-at"><em>@</em></i>UniStart's Blog</li><li class="link"><strong>本文链接：</strong> <a href="https://unistart2.github.io/posts/2aaf59a8/" title="WebGL 学习（一）">https://unistart2.github.io/posts/2aaf59a8/</a></li><li class="license"><strong>版权声明： </strong>本站所有文章除特别声明外，均采用 <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> 许可协议。转载请注明出处！</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/posts/fc4990cc/" itemprop="url" rel="prev" data-background-image="https:&#x2F;&#x2F;api.hanximeng.com&#x2F;ranimg&#x2F;api.php?351241" title="MySQL8 安装"><span class="type">上一篇</span> <span class="category"><i class="ic i-flag"></i> MySQL</span><h3>MySQL8 安装</h3></a></div><div class="item right"><a href="/posts/cd788354/" itemprop="url" rel="next" data-background-image="https:&#x2F;&#x2F;api.hanximeng.com&#x2F;ranimg&#x2F;api.php?201935" title="WebGL学习（附录）"><span class="type">下一篇</span> <span class="category"><i class="ic i-flag"></i> WebGL</span><h3>WebGL学习（附录）</h3></a></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="文章目录"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#canvas"><span class="toc-number">1.</span> <span class="toc-text">canvas</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9D%E8%AF%86%E7%9D%80%E8%89%B2%E5%99%A8%E7%A8%8B%E5%BA%8F"><span class="toc-number">2.</span> <span class="toc-text">初识着色器程序</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8A%A8%E6%80%81%E5%90%91%E7%9D%80%E8%89%B2%E5%99%A8%E4%BC%A0%E8%BE%93%E6%95%B0%E6%8D%AE"><span class="toc-number">3.</span> <span class="toc-text">动态向着色器传输数据</span></a></li></ol></div><div class="related panel pjax" data-title="系列文章"><ul><li class="active"><a href="/posts/2aaf59a8/" rel="bookmark" title="WebGL学习（一）">WebGL学习（一）</a></li><li><a href="/posts/cd788354/" rel="bookmark" title="WebGL学习（附录）">WebGL学习（附录）</a></li></ul></div><div class="overview panel" data-title="站点概览"><div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="unistart" data-src="/images/avatar.jpg"><p class="name" itemprop="name">unistart</p><div class="description" itemprop="description">个人博客</div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">27</span> <span class="name">文章</span></a></div><div class="item categories"><a href="/categories/"><span class="count">12</span> <span class="name">分类</span></a></div><div class="item tags"><a href="/tags/"><span class="count">17</span> <span class="name">标签</span></a></div></nav><div class="social"><span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL3VuaXN0YXJ0Mg==" title="https:&#x2F;&#x2F;github.com&#x2F;unistart2"><i class="ic i-github"></i></span> <span class="exturl item email" data-url="bWFpbHRvOjI2MDQyNDk2NDlAcXEuY29t" title="mailto:2604249649@qq.com"><i class="ic i-envelope"></i></span></div><ul class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>首页</a></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-feather"></i>文章</a><ul class="submenu"><li class="item"><a href="/archives/" rel="section"><i class="ic i-list-alt"></i>归档</a></li><li class="item"><a href="/categories/" rel="section"><i class="ic i-th"></i>分类</a></li><li class="item"><a href="/tags/" rel="section"><i class="ic i-tags"></i>标签</a></li></ul></li><li class="item"><a href="/friends/" rel="section"><i class="ic i-heart"></i>友達</a></li><li class="item"><a href="/links/" rel="section"><i class="ic i-magic"></i>链接</a></li></ul></div></div></div><ul id="quick"><li class="prev pjax"><a href="/posts/fc4990cc/" rel="prev" title="上一篇"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/posts/cd788354/" rel="next" title="下一篇"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"><div class="rpost pjax"><h2>随机文章</h2><ul><li class="item"><div class="breadcrumb"><a href="/categories/Ruby/" title="分类于 Ruby">Ruby</a></div><span><a href="/posts/41a47f87/" title="Ruby元编程（三）">Ruby元编程（三）</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/Rails/" title="分类于 Rails">Rails</a></div><span><a href="/posts/35a6dd5d/" title="Rails - 测试">Rails - 测试</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/Ruby/" title="分类于 Ruby">Ruby</a></div><span><a href="/posts/cbadcd5/" title="Ruby元编程（二）">Ruby元编程（二）</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/Ruby/" title="分类于 Ruby">Ruby</a></div><span><a href="/posts/fc6fd6b9/" title="Ruby元编程（一）">Ruby元编程（一）</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/Linux/" title="分类于 Linux">Linux</a></div><span><a href="/posts/b702c88f/" title="Linux学习 - 快速上手几个Linux命令">Linux学习 - 快速上手几个Linux命令</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/WebGL/" title="分类于 WebGL">WebGL</a></div><span><a href="/posts/cd788354/" title="WebGL学习（附录）">WebGL学习（附录）</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/Rust/" title="分类于 Rust">Rust</a></div><span><a href="/posts/5ff881ce/" title="Rust学习-所有权">Rust学习-所有权</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/Rails/" title="分类于 Rails">Rails</a></div><span><a href="/posts/a14d4661/" title="Rails - 初探">Rails - 初探</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/Rails/" title="分类于 Rails">Rails</a></div><span><a href="/posts/a14d4661/" title="Rails - 快速创建项目">Rails - 快速创建项目</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/Rails/" title="分类于 Rails">Rails</a></div><span><a href="/posts/35a6dd5d/" title="Rails - 编写测试">Rails - 编写测试</a></span></li></ul></div><div><h2>最新评论</h2><ul class="leancloud-recent-comment"></ul></div></div><div class="status"><div class="copyright">&copy; 2022 – <span itemprop="copyrightYear">2024</span> <span class="with-love"><i class="ic i-sakura rotate"></i> </span><span class="author" itemprop="copyrightHolder">unistart @ UniStart</span></div><div class="count"><span class="post-meta-item-icon"><i class="ic i-chart-area"></i> </span><span title="站点总字数">107k 字</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="ic i-coffee"></i> </span><span title="站点阅读时长">1:38</span></div><div class="powered-by">基于 <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL={path:"posts/2aaf59a8/",favicon:{show:"（●´3｀●）やれやれだぜ",hide:"(´Д｀)大変だ！"},search:{placeholder:"文章搜索",empty:"关于 「 ${query} 」，什么也没搜到",stats:"${time} ms 内找到 ${hits} 条结果"},valine:!0,fancybox:!0,copyright:'复制成功，转载请遵守 <i class="ic i-creative-commons"></i>BY-NC-SA 协议。',ignores:[function(e){return e.includes("#")},function(e){return new RegExp(LOCAL.path+"$").test(e)}]}</script><script src="https://cdn.polyfill.io/v2/polyfill.js"></script><script src="//fastly.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script><script src="/js/app.js?v=0.2.5"></script></body></html><!-- rebuild by hrmmi -->